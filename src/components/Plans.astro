---
interface Props {
  count?: number;
}

const { count = 4 } = Astro.props;


const PLAN_DATA = [
  { duration: "1 Hora", price: 5 },
  { duration: "1 Día", price: 15 },
  { duration: "15 Días", price: 100 },
  { duration: "1 Mes", price: 150 },
];

const plans = PLAN_DATA.slice(0, count).map((plan, i) => ({
  ...plan,
  currency: "Bs",
  isPopular: i === 1
}));

const gridClass = count === 4 
  ? "grid-cols-2 sm:grid-cols-4" 
  : `grid-cols-${Math.min(count, 2)} sm:grid-cols-${Math.min(count, 4)}`;
---

<div class="w-full space-y-2">
  <!-- Header -->
  <div class="flex items-center justify-between px-1">
    <div>
      <h2 class="text-base font-bold leading-tight text-text">
        Elige tu Plan
      </h2>
      <p class="text-[10px] font-medium opacity-80 text-text-secondary">
        Navegación de alta velocidad
      </p>
    </div>
    <div class="px-1.5 py-0.5 rounded-md bg-opacity-10 flex items-center gap-1 bg-primary-500">
      <span class="relative flex h-1.5 w-1.5">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 bg-primary-500"></span>
        <span class="relative inline-flex rounded-full h-1.5 w-1.5 bg-primary-600"></span>
      </span>
      <span class="text-[9px] font-bold uppercase tracking-wide text-primary-700">Ilimitado</span>
    </div>
  </div>

  <!-- Plans Grid -->
  <div class={`grid ${gridClass} gap-2`}>
    {
      plans.map((plan, index) => (
        <div
          class:list={[
            "group relative flex flex-col items-center p-2 rounded-lg transition-all duration-300 hover:shadow-md active:scale-95 cursor-pointer bg-opacity-50 backdrop-blur-sm bg-bg-secondary",
            plan.isPopular ? "border-2 border-primary-500" : "border border-primary-200"
          ]}
          style={{ animationDelay: `${index * 100}ms` }}
        >
          {plan.isPopular && (
            <div class="absolute -top-2 px-1.5 py-px rounded-full text-[8px] font-bold uppercase tracking-wider text-white shadow-sm transform bg-primary-500">
              Mejor Valor
            </div>
          )}

          <div class="flex items-baseline leading-none">
             <span class="text-lg font-bold tracking-tight text-text">
              {plan.price}
            </span>
            <span class="text-[10px] font-bold ml-0.5 text-primary-600">
              {plan.currency}
            </span>
          </div>

          <div class="w-full h-px my-1 opacity-10 bg-text-secondary"></div>

          <h3 class="text-[10px] font-bold uppercase tracking-wide text-text-secondary">
            {plan.duration}
          </h3>
          
          <!-- Hover Gradient -->
          <div class="absolute inset-0 rounded-lg opacity-0 group-hover:opacity-5 transition-opacity pointer-events-none bg-linear-to-br from-primary-500 to-transparent"></div>
        </div>
      ))
    }
  </div>
</div>

<style>
  .group {
    animation: slideUp 0.5s ease-out forwards;
    opacity: 0;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
